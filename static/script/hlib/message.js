//@ sourceMappingURL=message.map
// Generated by CoffeeScript 1.6.1
var _ref,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

if ((_ref = window.hlib) == null) {
  window.hlib = {};
}

window.hlib.MessageDialog = (function() {

  function MessageDialog(eid) {
    if (!eid) {
      eid = window.hlib.OPTS.message_dialog;
    }
    this.eid = eid;
    this.classes = null;
    $('.modal-footer button').click(function() {
      window.hlib.MESSAGE.hide();
      return false;
    });
  }

  MessageDialog.prototype.show = function(label, msg, beforeClose) {
    var beforeClose_handler, eid;
    $(this.eid + ' .modal-header h3').html('');
    if (label) {
      $(this.eid + ' .modal-header h3').html(window.hlib._g(label));
    }
    $(this.eid + ' .modal-body p').html('');
    if (msg) {
      $(this.eid + ' .modal-body p').html(msg);
    }
    if (beforeClose) {
      eid = this.eid;
      beforeClose_handler = function() {
        return beforeClose();
      };
      $(eid).off('hidden', beforeClose_handler);
    }
    $(this.eid).removeClass('bg-color-red bg-color-green');
    if (this.classes) {
      $(this.eid).addClass(this.classes);
    }
    return $(this.eid).modal('show');
  };

  MessageDialog.prototype.hide = function() {
    $(this.eid).modal('hide');
    return $('.modal-backdrop').remove();
  };

  return MessageDialog;

})();

window.hlib.ErrorDialog = (function(_super) {

  __extends(ErrorDialog, _super);

  function ErrorDialog(eid) {
    ErrorDialog.__super__.constructor.call(this, eid);
    this.classes = 'bg-color-red';
  }

  return ErrorDialog;

})(window.hlib.MessageDialog);

window.hlib.InfoDialog = (function(_super) {

  __extends(InfoDialog, _super);

  function InfoDialog(eid) {
    InfoDialog.__super__.constructor.call(this, eid);
    this.classes = 'bg-color-green';
  }

  return InfoDialog;

})(window.hlib.MessageDialog);

window.hlib.WorkingDialog = (function(_super) {

  __extends(WorkingDialog, _super);

  function WorkingDialog(eid) {
    WorkingDialog.__super__.constructor.call(this, eid);
  }

  WorkingDialog.prototype.show = function() {
    return WorkingDialog.__super__.show.call(this, 'Your request is being processed by our hamsters', window.hlib._g('If it takes too long, poke our admins <a href="irc://ellen.czn.cz/osadnici">here</a>.'));
  };

  return WorkingDialog;

})(window.hlib.MessageDialog);
