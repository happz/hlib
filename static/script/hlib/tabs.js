//@ sourceMappingURL=tabs.map
// Generated by CoffeeScript 1.6.1
var _ref;

if ((_ref = window.hlib) == null) {
  window.hlib = {};
}

window.hlib.Tabs = (function() {

  function Tabs(eid) {
    this.eid = eid;
    this.current_tab = null;
    $(this.eid).tabs();
  }

  Tabs.prototype.render = function() {
    if (!this.current_tab) {
      return true;
    }
    return $('#' + this.current_tab).trigger('hlib_render');
  };

  Tabs.prototype.show_tab = function(handle, name, index) {
    var tid;
    tid = '#' + name;
    $(tid).trigger('hlib_render');
    $(this.eid).tabs('select', index);
    this.current_tab = name;
    if (handle.attr('location-hash')) {
      return window.location.hash = handle.attr('location-hash');
    }
  };

  Tabs.prototype.show_by_hash = function(default_name) {
    var done, _tabs;
    _tabs = this;
    done = false;
    $(_tabs.eid + '>ul>li>a').each(function(index, element) {
      var handle, name;
      handle = $(this);
      if (handle.attr('location-hash') !== window.location.hash) {
        return;
      }
      name = (handle.attr('href')).substring(1);
      _tabs.show_tab(handle, name, index);
      done = true;
      return false;
    });
    if (!done) {
      this.show(default_name);
    }
  };

  Tabs.prototype.show = function(name) {
    var tid, _tabs;
    _tabs = this;
    tid = '#' + name;
    $(_tabs.eid + '>ul>li>a').each(function(index, element) {
      if ($(this).attr('href') !== tid) {
        return;
      }
      _tabs.show_tab($(this), name, index);
      return false;
    });
  };

  return Tabs;

})();
